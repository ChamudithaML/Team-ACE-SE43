{% extends 'base.html' %}

{% block title %}
Rotten or Fresh
{% endblock %}


{% block content %}

<script>
    function readURL(input) {
        for (var i = 0; i < input.files.length; i++) {
            var ext = input.files[i].name.substring(input.files[i].name.lastIndexOf('.') + 1).toLowerCase()
            if ((ext == 'jpg') || (ext == 'png')) {
                $("#msg").text("Files are supported")
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#imagePreview').attr('src', e.target.result);
                    };
                    reader.readAsDataURL(input.files[0]);
                    $('#uploadLabel').text('File name: ' + input.files[0].name);
                }
            } else {
                $("#msg").text("Files are NOT supported")
                alert('Files are NOT supported')
            }
        }
    }
</script>

</head>

<div class="container-fluid py-5">
    <div class="row py-4">
        <div class="text-center">
            <h1 class="display-4">FruityEye Image Upload</h1>
            <p class="mb-3">Upload your image using below choose File button</p>
            <svg height="150px" viewBox="0 0 512 512" width="150px" xmlns="http://www.w3.org/2000/svg">
                <path
                        d="M447.1 32h-384C28.64 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM111.1 96c26.51 0 48 21.49 48 48S138.5 192 111.1 192s-48-21.49-48-48S85.48 96 111.1 96zM446.1 407.6C443.3 412.8 437.9 416 432 416H82.01c-6.021 0-11.53-3.379-14.26-8.75c-2.73-5.367-2.215-11.81 1.334-16.68l70-96C142.1 290.4 146.9 288 152 288s9.916 2.441 12.93 6.574l32.46 44.51l93.3-139.1C293.7 194.7 298.7 192 304 192s10.35 2.672 13.31 7.125l128 192C448.6 396 448.9 402.3 446.1 407.6z"/>
            </svg>
        </div>
    </div>

    <div class="row mx-auto">
        <form action="{{ url_for('rot_image') }}" enctype="multipart/form-data" id="upload-form" method="POST">
            <div class="col-6 input-group mb-3 px-2 py-2 rounded-pill bg-light shadow-sm">
                <!-- <input style="margin-left: 20px;" type="file" name="file" accept="image/*" multiple> -->
                <input class="form-control border-0" id="upload" onchange="readURL(this);" type="file" name="file" accept="image/*">

                <label class="font-weight-light text-muted" for="upload" id="uploadLabel">Choose file</label>
                <div class="input-group-append">
                    <label class="btn btn-light m-0 rounded-pill px-4" for="upload">
                        <i class="fa fa-cloud-upload mr-2 text-muted"></i>
                        <small class="text-uppercase font-weight-bold text-muted">Choose file</small>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="col-12 ld-grid gap-2 d-flex justify-content-between align-items-center">
                    <div class="input-group-append px-4 m-2">
                        <label class="btn btn-light m-0 rounded-pill px-5 py-5" for="upload">
                            <i class="fa fa-cloud-upload mr-2 text-muted"></i>
                            <small class="text-uppercase font-weight-bold text-muted">Choose file</small>
                        </label>
                    </div>
                    <input class="btn btn-primary btn-lg px-5 py-5 m-2" type="submit" value="Predict">
                </div>
            </div>
        </form>
        <p class="font-italic text-center">The image Preview </p>
        <div class="imageContainer mt-4">
            <img alt="" class="img-fluid rounded shadow-sm mx-auto d-block" id="imagePreview" src="#">
        </div>

    </div>
</div>

{% endblock %}
